(self["webpackChunkclient"] = self["webpackChunkclient"] || []).push([["editUserForm"],{

/***/ "./src/js/library/editUserForm.js":
/*!****************************************!*\
  !*** ./src/js/library/editUserForm.js ***!
  \****************************************/
/***/ (() => {

const usernameInput = document.querySelector("#username-edit");
const emailInput = document.querySelector("#email-edit");
const passwordInput = document.querySelector("#password-edit");
const editUserSection = document.querySelector(".edit_user_section");
let existingUserDataGlobal;
async function renderEditUserForm() {
  const responseUserData = await fetch("/api/users/user/ID");
  const responseUser = await responseUserData.json();
  let existingUserData = {
    email: responseUser.email,
    username: responseUser.username
  };
  usernameInput.value = existingUserData.username;
  emailInput.value = existingUserData.email;
  existingUserDataGlobal = existingUserData;
  editUserSection.setAttribute("style", "display: block;");
}
const settingsBtn = document.querySelector("#settings");
settingsBtn.addEventListener("click", renderEditUserForm);

// CLEAR EDIT USER FORM
function clearEditUserForm() {
  const userInputs = document.querySelectorAll(".user-form-control");
  for (const input of userInputs) {
    input.value = "";
  }
}
const clearEditUserFormBtn = document.querySelector("#clear-edit-user-form");
clearEditUserFormBtn.addEventListener("click", clearEditUserForm);

// CLOSE EDIT BOOK FORM
function closeEditUserForm() {
  document.querySelector(".edit_user_section").setAttribute("style", "display: none;");
}
const closeEditUserFormBtn = document.querySelector("#close-edit-user-form");
closeEditUserFormBtn.addEventListener("click", closeEditUserForm);

// EDIT USER FUNCTION
async function editUser() {
  const existingErrMsg = document.querySelector(".existing-err-msg");
  existingErrMsg.style.visibility = "hidden";
  const newUserUpdate = new User({
    username: usernameInput.value.trim(),
    email: emailInput.value.trim(),
    password: passwordInput.value
  });

  // if (existingUserDataGlobal.email === newUserUpdate.email)
  // 	delete newUserUpdate.email;
  // if (existingUserDataGlobal.username === newUserUpdate.username)
  // 	delete newUserUpdate.username;
  if (newUserUpdate.password.trim() === "") delete newUserUpdate.password;else if (newUserUpdate.password.length < 8) {
    existingErrMsg.style.visibility = "visible";
    existingErrMsg.textContent = "New password must be at least 8 characters";
    return;
  }
  const existingUserData = await fetch("/api/users/existing", {
    method: "POST",
    body: JSON.stringify(newUserUpdate),
    headers: {
      "Content-Type": "application/json"
    }
  });
  const existingUserResponse = await existingUserData.json();
  if (existingUserResponse.existingEmail && existingUserResponse.existingUsername) {
    existingErrMsg.style.visibility = "visible";
    existingErrMsg.textContent = "Username and email are both already taken";
  } else if (existingUserResponse.existingEmail && !existingUserResponse.existingUsername) {
    existingErrMsg.style.visibility = "visible";
    existingErrMsg.textContent = "Email is already taken";
  } else if (!existingUserResponse.existingEmail && existingUserResponse.existingUsername) {
    existingErrMsg.style.visibility = "visible";
    existingErrMsg.textContent = "Username is already taken";
  }
  const responseUserData = await fetch("/api/users/user/ID");
  const responseUser = await responseUserData.json();
  let userId = {
    id: responseUser.id
  };
  const fetchURLEdit = `/api/users/${userId.id}`;
  const response = await fetch(fetchURLEdit, {
    method: "PUT",
    body: JSON.stringify(newUserUpdate),
    headers: {
      "Content-Type": "application/json"
    }
  });
  if (response.ok) {
    document.querySelector(".edit_user_section").setAttribute("style", "display: none;");
    renderBooks();
  } else {
    alert("Failed to update user.");
  }
}
const editUserFormBtn = document.querySelector(".edit-user");
editUserFormBtn.addEventListener("click", editUser);

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ var __webpack_exports__ = (__webpack_exec__("./src/js/library/editUserForm.js"));
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTSxHQUFHO0lBQ1pDLEVBQUUsRUFBRW5DLFlBQVksQ0FBQ21DO0VBQ2xCLENBQUM7RUFFRCxNQUFNQyxZQUFZLEdBQUksY0FBYUYsTUFBTSxDQUFDQyxFQUFHLEVBQUM7RUFDOUMsTUFBTUUsUUFBUSxHQUFHLE1BQU10QyxLQUFLLENBQUNxQyxZQUFZLEVBQUU7SUFDMUNWLE1BQU0sRUFBRSxLQUFLO0lBQ2JDLElBQUksRUFBRUMsSUFBSSxDQUFDQyxTQUFTLENBQUNULGFBQWEsQ0FBQztJQUNuQ1UsT0FBTyxFQUFFO01BQUUsY0FBYyxFQUFFO0lBQW1CO0VBQy9DLENBQUMsQ0FBQztFQUNGLElBQUlPLFFBQVEsQ0FBQ0MsRUFBRSxFQUFFO0lBQ2hCL0MsUUFBUSxDQUNOQyxhQUFhLENBQUMsb0JBQW9CLENBQUMsQ0FDbkNjLFlBQVksQ0FBQyxPQUFPLEVBQUUsZ0JBQWdCLENBQUM7SUFDekNpQyxXQUFXLEVBQUU7RUFDZCxDQUFDLE1BQU07SUFDTkMsS0FBSyxDQUFDLHdCQUF3QixDQUFDO0VBQ2hDO0FBQ0Q7QUFFQSxNQUFNQyxlQUFlLEdBQUdsRCxRQUFRLENBQUNDLGFBQWEsQ0FBQyxZQUFZLENBQUM7QUFDNURpRCxlQUFlLENBQUNqQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUVRLFFBQVEsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NsaWVudC8uL3NyYy9qcy9saWJyYXJ5L2VkaXRVc2VyRm9ybS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB1c2VybmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN1c2VybmFtZS1lZGl0XCIpO1xuY29uc3QgZW1haWxJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZW1haWwtZWRpdFwiKTtcbmNvbnN0IHBhc3N3b3JkSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Bhc3N3b3JkLWVkaXRcIik7XG5cbmNvbnN0IGVkaXRVc2VyU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdF91c2VyX3NlY3Rpb25cIik7XG5sZXQgZXhpc3RpbmdVc2VyRGF0YUdsb2JhbDtcbmFzeW5jIGZ1bmN0aW9uIHJlbmRlckVkaXRVc2VyRm9ybSgpIHtcblx0Y29uc3QgcmVzcG9uc2VVc2VyRGF0YSA9IGF3YWl0IGZldGNoKFwiL2FwaS91c2Vycy91c2VyL0lEXCIpO1xuXHRjb25zdCByZXNwb25zZVVzZXIgPSBhd2FpdCByZXNwb25zZVVzZXJEYXRhLmpzb24oKTtcblxuXHRsZXQgZXhpc3RpbmdVc2VyRGF0YSA9IHtcblx0XHRlbWFpbDogcmVzcG9uc2VVc2VyLmVtYWlsLFxuXHRcdHVzZXJuYW1lOiByZXNwb25zZVVzZXIudXNlcm5hbWUsXG5cdH07XG5cblx0dXNlcm5hbWVJbnB1dC52YWx1ZSA9IGV4aXN0aW5nVXNlckRhdGEudXNlcm5hbWU7XG5cdGVtYWlsSW5wdXQudmFsdWUgPSBleGlzdGluZ1VzZXJEYXRhLmVtYWlsO1xuXG5cdGV4aXN0aW5nVXNlckRhdGFHbG9iYWwgPSBleGlzdGluZ1VzZXJEYXRhO1xuXG5cdGVkaXRVc2VyU2VjdGlvbi5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImRpc3BsYXk6IGJsb2NrO1wiKTtcbn1cbmNvbnN0IHNldHRpbmdzQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzZXR0aW5nc1wiKTtcbnNldHRpbmdzQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCByZW5kZXJFZGl0VXNlckZvcm0pO1xuXG4vLyBDTEVBUiBFRElUIFVTRVIgRk9STVxuZnVuY3Rpb24gY2xlYXJFZGl0VXNlckZvcm0oKSB7XG5cdGNvbnN0IHVzZXJJbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnVzZXItZm9ybS1jb250cm9sXCIpO1xuXHRmb3IgKGNvbnN0IGlucHV0IG9mIHVzZXJJbnB1dHMpIHtcblx0XHRpbnB1dC52YWx1ZSA9IFwiXCI7XG5cdH1cbn1cbmNvbnN0IGNsZWFyRWRpdFVzZXJGb3JtQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjbGVhci1lZGl0LXVzZXItZm9ybVwiKTtcbmNsZWFyRWRpdFVzZXJGb3JtQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbGVhckVkaXRVc2VyRm9ybSk7XG5cbi8vIENMT1NFIEVESVQgQk9PSyBGT1JNXG5mdW5jdGlvbiBjbG9zZUVkaXRVc2VyRm9ybSgpIHtcblx0ZG9jdW1lbnRcblx0XHQucXVlcnlTZWxlY3RvcihcIi5lZGl0X3VzZXJfc2VjdGlvblwiKVxuXHRcdC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImRpc3BsYXk6IG5vbmU7XCIpO1xufVxuY29uc3QgY2xvc2VFZGl0VXNlckZvcm1CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Nsb3NlLWVkaXQtdXNlci1mb3JtXCIpO1xuY2xvc2VFZGl0VXNlckZvcm1CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlRWRpdFVzZXJGb3JtKTtcblxuLy8gRURJVCBVU0VSIEZVTkNUSU9OXG5hc3luYyBmdW5jdGlvbiBlZGl0VXNlcigpIHtcblx0Y29uc3QgZXhpc3RpbmdFcnJNc2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmV4aXN0aW5nLWVyci1tc2dcIik7XG5cdGV4aXN0aW5nRXJyTXNnLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuXG5cdGNvbnN0IG5ld1VzZXJVcGRhdGUgPSBuZXcgVXNlcih7XG5cdFx0dXNlcm5hbWU6IHVzZXJuYW1lSW5wdXQudmFsdWUudHJpbSgpLFxuXHRcdGVtYWlsOiBlbWFpbElucHV0LnZhbHVlLnRyaW0oKSxcblx0XHRwYXNzd29yZDogcGFzc3dvcmRJbnB1dC52YWx1ZSxcblx0fSk7XG5cblx0Ly8gaWYgKGV4aXN0aW5nVXNlckRhdGFHbG9iYWwuZW1haWwgPT09IG5ld1VzZXJVcGRhdGUuZW1haWwpXG5cdC8vIFx0ZGVsZXRlIG5ld1VzZXJVcGRhdGUuZW1haWw7XG5cdC8vIGlmIChleGlzdGluZ1VzZXJEYXRhR2xvYmFsLnVzZXJuYW1lID09PSBuZXdVc2VyVXBkYXRlLnVzZXJuYW1lKVxuXHQvLyBcdGRlbGV0ZSBuZXdVc2VyVXBkYXRlLnVzZXJuYW1lO1xuXHRpZiAobmV3VXNlclVwZGF0ZS5wYXNzd29yZC50cmltKCkgPT09IFwiXCIpIGRlbGV0ZSBuZXdVc2VyVXBkYXRlLnBhc3N3b3JkO1xuXHRlbHNlIGlmIChuZXdVc2VyVXBkYXRlLnBhc3N3b3JkLmxlbmd0aCA8IDgpIHtcblx0XHRleGlzdGluZ0Vyck1zZy5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG5cdFx0ZXhpc3RpbmdFcnJNc2cudGV4dENvbnRlbnQgPSBcIk5ldyBwYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDggY2hhcmFjdGVyc1wiO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGNvbnN0IGV4aXN0aW5nVXNlckRhdGEgPSBhd2FpdCBmZXRjaChcIi9hcGkvdXNlcnMvZXhpc3RpbmdcIiwge1xuXHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkobmV3VXNlclVwZGF0ZSksXG5cdFx0aGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuXHR9KTtcblx0Y29uc3QgZXhpc3RpbmdVc2VyUmVzcG9uc2UgPSBhd2FpdCBleGlzdGluZ1VzZXJEYXRhLmpzb24oKTtcblxuXHRpZiAoXG5cdFx0ZXhpc3RpbmdVc2VyUmVzcG9uc2UuZXhpc3RpbmdFbWFpbCAmJlxuXHRcdGV4aXN0aW5nVXNlclJlc3BvbnNlLmV4aXN0aW5nVXNlcm5hbWVcblx0KSB7XG5cdFx0ZXhpc3RpbmdFcnJNc2cuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuXHRcdGV4aXN0aW5nRXJyTXNnLnRleHRDb250ZW50ID0gXCJVc2VybmFtZSBhbmQgZW1haWwgYXJlIGJvdGggYWxyZWFkeSB0YWtlblwiO1xuXHR9IGVsc2UgaWYgKFxuXHRcdGV4aXN0aW5nVXNlclJlc3BvbnNlLmV4aXN0aW5nRW1haWwgJiZcblx0XHQhZXhpc3RpbmdVc2VyUmVzcG9uc2UuZXhpc3RpbmdVc2VybmFtZVxuXHQpIHtcblx0XHRleGlzdGluZ0Vyck1zZy5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG5cdFx0ZXhpc3RpbmdFcnJNc2cudGV4dENvbnRlbnQgPSBcIkVtYWlsIGlzIGFscmVhZHkgdGFrZW5cIjtcblx0fSBlbHNlIGlmIChcblx0XHQhZXhpc3RpbmdVc2VyUmVzcG9uc2UuZXhpc3RpbmdFbWFpbCAmJlxuXHRcdGV4aXN0aW5nVXNlclJlc3BvbnNlLmV4aXN0aW5nVXNlcm5hbWVcblx0KSB7XG5cdFx0ZXhpc3RpbmdFcnJNc2cuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuXHRcdGV4aXN0aW5nRXJyTXNnLnRleHRDb250ZW50ID0gXCJVc2VybmFtZSBpcyBhbHJlYWR5IHRha2VuXCI7XG5cdH1cblxuXHRjb25zdCByZXNwb25zZVVzZXJEYXRhID0gYXdhaXQgZmV0Y2goXCIvYXBpL3VzZXJzL3VzZXIvSURcIik7XG5cdGNvbnN0IHJlc3BvbnNlVXNlciA9IGF3YWl0IHJlc3BvbnNlVXNlckRhdGEuanNvbigpO1xuXG5cdGxldCB1c2VySWQgPSB7XG5cdFx0aWQ6IHJlc3BvbnNlVXNlci5pZCxcblx0fTtcblxuXHRjb25zdCBmZXRjaFVSTEVkaXQgPSBgL2FwaS91c2Vycy8ke3VzZXJJZC5pZH1gO1xuXHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGZldGNoVVJMRWRpdCwge1xuXHRcdG1ldGhvZDogXCJQVVRcIixcblx0XHRib2R5OiBKU09OLnN0cmluZ2lmeShuZXdVc2VyVXBkYXRlKSxcblx0XHRoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG5cdH0pO1xuXHRpZiAocmVzcG9uc2Uub2spIHtcblx0XHRkb2N1bWVudFxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdF91c2VyX3NlY3Rpb25cIilcblx0XHRcdC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImRpc3BsYXk6IG5vbmU7XCIpO1xuXHRcdHJlbmRlckJvb2tzKCk7XG5cdH0gZWxzZSB7XG5cdFx0YWxlcnQoXCJGYWlsZWQgdG8gdXBkYXRlIHVzZXIuXCIpO1xuXHR9XG59XG5cbmNvbnN0IGVkaXRVc2VyRm9ybUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC11c2VyXCIpO1xuZWRpdFVzZXJGb3JtQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlZGl0VXNlcik7XG4iXSwibmFtZXMiOlsidXNlcm5hbWVJbnB1dCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImVtYWlsSW5wdXQiLCJwYXNzd29yZElucHV0IiwiZWRpdFVzZXJTZWN0aW9uIiwiZXhpc3RpbmdVc2VyRGF0YUdsb2JhbCIsInJlbmRlckVkaXRVc2VyRm9ybSIsInJlc3BvbnNlVXNlckRhdGEiLCJmZXRjaCIsInJlc3BvbnNlVXNlciIsImpzb24iLCJleGlzdGluZ1VzZXJEYXRhIiwiZW1haWwiLCJ1c2VybmFtZSIsInZhbHVlIiwic2V0QXR0cmlidXRlIiwic2V0dGluZ3NCdG4iLCJhZGRFdmVudExpc3RlbmVyIiwiY2xlYXJFZGl0VXNlckZvcm0iLCJ1c2VySW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0IiwiY2xlYXJFZGl0VXNlckZvcm1CdG4iLCJjbG9zZUVkaXRVc2VyRm9ybSIsImNsb3NlRWRpdFVzZXJGb3JtQnRuIiwiZWRpdFVzZXIiLCJleGlzdGluZ0Vyck1zZyIsInN0eWxlIiwidmlzaWJpbGl0eSIsIm5ld1VzZXJVcGRhdGUiLCJVc2VyIiwidHJpbSIsInBhc3N3b3JkIiwibGVuZ3RoIiwidGV4dENvbnRlbnQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImhlYWRlcnMiLCJleGlzdGluZ1VzZXJSZXNwb25zZSIsImV4aXN0aW5nRW1haWwiLCJleGlzdGluZ1VzZXJuYW1lIiwidXNlcklkIiwiaWQiLCJmZXRjaFVSTEVkaXQiLCJyZXNwb25zZSIsIm9rIiwicmVuZGVyQm9va3MiLCJhbGVydCIsImVkaXRVc2VyRm9ybUJ0biJdLCJzb3VyY2VSb290IjoiIn0=