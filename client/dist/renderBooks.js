(self["webpackChunkclient"] = self["webpackChunkclient"] || []).push([["renderBooks"],{

/***/ "./src/js/library/renderBooks.js":
/*!***************************************!*\
  !*** ./src/js/library/renderBooks.js ***!
  \***************************************/
/***/ (() => {

const renderBooks = async function () {
  let searchTerm = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
  const bookContainer = document.querySelector(".book-card-container");
  bookContainer.innerHTML = "";
  const currentBooksData = await fetch("/api/books");
  let currentBooks = await currentBooksData.json();
  const lowerSearchTerm = searchTerm.toLowerCase();
  if (lowerSearchTerm !== "" && typeof lowerSearchTerm === "string") {
    const filteredCurrentBooks = currentBooks.filter(book => {
      return book.title.toLowerCase().includes(lowerSearchTerm) || book.author.toLowerCase().includes(lowerSearchTerm);
    });
    currentBooks = filteredCurrentBooks;
  }
  for (let i = 0; i < currentBooks.length; i++) {
    const book = currentBooks[i];
    const bookCard = document.createElement("div");
    if (book.is_read === true || book.is_read === "true") {
      bookCard.classList.add("read");
    } else if (book.is_read === false) bookCard.classList.add("not-read");
    bookCard.classList.add("single-book", "scale-in-center");
    bookCard.setAttribute("id", "book-" + i);
    bookCard.setAttribute("data-index", i);

    // CLOSE AND DELETE
    const closeBtn = document.createElement("span");
    closeBtn.classList.add("material-icons", "remove-book");
    closeBtn.textContent = " close ";
    closeBtn.addEventListener("click", async function () {
      const fetchURL = `/api/books/${book.id}`;
      const response = await fetch(fetchURL, {
        method: "DELETE"
      });
      if (response.ok) {
        renderProgressBar();
        renderBooks();
      } else {
        alert("Failed to delete book.");
      }
    });
    // EDIT BUTTON
    const editBtn = document.createElement("span");
    editBtn.classList.add("material-icons", "edit-book-form-open");
    editBtn.textContent = " edit ";
    editBtn.addEventListener("click", async function (event) {
      // SHOW EDIT FORM
      document.querySelector(".edit_book_section").setAttribute("style", "display: block;");
      let bookCardChildren = Array.from(event.target.parentElement.childNodes);
      let existingBookInfo = {
        title: bookCardChildren[2].textContent,
        author: bookCardChildren[3].textContent.split(" ").slice(1).join(" "),
        isbn: bookCardChildren[4].textContent.split(" ")[1],
        pages: bookCardChildren[5].textContent.split(" ")[3],
        edition: bookCardChildren[6].textContent.split(" ")[1],
        publish_date: bookCardChildren[7].textContent.split(" ")[1],
        is_read: bookCardChildren[9].firstChild.checked,
        book_id: book.id
      };

      // POPULATE INPUTS WITH DEFAULT CONTENT
      document.querySelector("#b-title-edit").value = existingBookInfo.title;
      document.querySelector("#b-author-edit").value = existingBookInfo.author;
      document.querySelector("#b-isbn-edit").value = existingBookInfo.isbn;
      document.querySelector("#b-pages-edit").value = existingBookInfo.pages;
      document.querySelector("#b-edition-edit").value = existingBookInfo.edition;
      document.querySelector("#b-publishing_date-edit").value = existingBookInfo.publish_date;
      document.querySelector("#b-read_status-edit").value = existingBookInfo.is_read;
      document.querySelector("#edit-book-id").dataset.bookId = existingBookInfo.book_id;
    });
    // BOOK COVER IMG
    const bookCoverImg = document.createElement("img");
    bookCoverImg.classList.add("book-cover-img");
    bookCoverImg.setAttribute("src", "../assets/img/book-cover-placeholder.jpeg");
    bookCoverImg.setAttribute("alt", "book cover image");
    //
    const bookTitle = document.createElement("h3");
    bookTitle.classList.add("book-title");
    bookTitle.textContent = book.title;
    //
    const bookAuthor = document.createElement("span");
    bookAuthor.classList.add("book-author");
    const labelAuthor = document.createElement("span");
    labelAuthor.classList.add("b-label");
    labelAuthor.textContent = "By: ";
    const authorDisplay = document.createElement("span");
    authorDisplay.classList.add("author");
    authorDisplay.textContent = book.author;
    bookAuthor.append(labelAuthor, authorDisplay);
    //
    const bookIsbn = document.createElement("span");
    bookIsbn.classList.add("book-isbn");
    const labelIsbn = document.createElement("span");
    labelIsbn.classList.add("b-label");
    labelIsbn.textContent = "ISBN: ";
    const isbnDisplay = document.createElement("span");
    isbnDisplay.classList.add("isbn");
    isbnDisplay.textContent = book.isbn;
    bookIsbn.append(labelIsbn, isbnDisplay);
    //
    const pagesCount = document.createElement("span");
    pagesCount.classList.add("pages-count");
    const labelPages = document.createElement("span");
    labelPages.classList.add("b-label");
    labelPages.textContent = "Pages: ";
    const bookPages = document.createElement("span");
    bookPages.classList.add("pages");
    bookPages.textContent = book.pages;
    pagesCount.append(labelPages, bookPages);
    //
    const bookEdition = document.createElement("span");
    bookEdition.classList.add("book-edition");
    const labelEdition = document.createElement("span");
    labelEdition.classList.add("b-label");
    labelEdition.textContent = "Edition: ";
    const editionDisplay = document.createElement("span");
    editionDisplay.classList.add("edition");
    editionDisplay.textContent = book.edition;
    bookEdition.append(labelEdition, editionDisplay);
    //
    const publishDate = document.createElement("span");
    publishDate.classList.add("book-published");
    const labelDate = document.createElement("span");
    labelDate.classList.add("b-label");
    labelDate.textContent = "Published: ";
    const dateDisplay = document.createElement("span");
    dateDisplay.classList.add("publish-date");
    dateDisplay.textContent = book.publish_date;
    publishDate.append(labelDate, dateDisplay);
    // FETCH BUTTON

    const fetchBtn = document.createElement("span");
    fetchBtn.classList.add("material-icons", "fetch-book-data-button");
    fetchBtn.textContent = " fetch info ";
    fetchBtn.addEventListener("click", async function (event) {
      const bookDataResponse = await fetchBookInfo(book.title.toLowerCase().trim());
      const bookData = bookDataResponse.docs[0];
      const fetchedBookData = {
        title: bookData.title,
        author: bookData.author_name[0],
        isbn: bookData.isbn[0],
        publish_date: bookData.first_publish_year,
        cover_img_src: `https://covers.openlibrary.org/b/isbn/${bookData.isbn[0]}-M.jpg`
      };
      const replaceBookData = _ref => {
        let {
          title,
          author,
          isbn,
          publish_date,
          cover_img_src
        } = _ref;
        bookTitle.textContent = title;
        bookAuthor.textContent = author;
        bookIsbn.textContent = isbn;
        publishDate.textContent = publish_date;
        bookCoverImg.setAttribute("src", cover_img_src);
      };
      replaceBookData(fetchedBookData);
    });
    // READ TOGGLE
    const readToggleLabel = document.createElement("span");
    readToggleLabel.classList.add("read_toggle_label");
    readToggleLabel.textContent = "Mark as read: ";
    //
    const toggleControlLabel = document.createElement("label");
    toggleControlLabel.classList.add("switch");
    const toggleControlCheckbox = document.createElement("input");
    toggleControlCheckbox.setAttribute("type", "checkbox");
    toggleControlCheckbox.classList.add("read_toggle");
    // if (book.is_read===true) toggleControlCheckbox.setAttribute("checked", "");
    if (book.is_read === true || book.is_read === "true") toggleControlCheckbox.checked = true;
    // if (bookReadStatusForm.value === true) toggleControlCheckbox.checked = true;
    const toggleControlSpan = document.createElement("span");
    toggleControlSpan.classList.add("read-toggle-slider", "round");
    toggleControlLabel.append(toggleControlCheckbox, toggleControlSpan);
    //

    toggleControlCheckbox.addEventListener("click", async function (event) {
      let element = event.target;
      let bookContainer = element.parentElement.parentElement;
      if (bookContainer.classList.contains("not-read")) {
        bookContainer.classList.remove("not-read");
        bookContainer.classList.add("read");
      } else if (bookContainer.classList.contains("read")) {
        bookContainer.classList.remove("read");
        bookContainer.classList.add("not-read");
      }
      let index = bookContainer.getAttribute("data-index");
      currentBooks[index].is_read = element.checked;
      const newReadStatusData = {
        is_read: currentBooks[index].is_read
      };
      const fetchURL = `/api/books/${book.id}`;
      const response = await fetch(fetchURL, {
        method: "PUT",
        body: JSON.stringify(newReadStatusData),
        headers: {
          "Content-Type": "application/json"
        }
      });
      if (response.ok) {
        renderProgressBar();
        renderBooks();
        // // direct logged-in user to home page
        // document.location.replace("/");
      } else {
        alert("Failed to update book read status.");
      }

      // renderBooks();
    });

    bookCard.append(closeBtn, editBtn, bookCoverImg, bookTitle, bookAuthor, bookIsbn, pagesCount, bookEdition, publishDate, fetchBtn, readToggleLabel, toggleControlLabel);
    bookContainer.appendChild(bookCard);
  }
};

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ var __webpack_exports__ = (__webpack_exec__("./src/js/library/renderBooks.js"));
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q1ZJLFFBQVEsRUFDUkcsVUFBVSxFQUNWRyxXQUFXLEVBQ1hHLFdBQVcsRUFDWEcsUUFBUSxFQUNSVyxlQUFlLEVBQ2ZDLGtCQUFrQixDQUNsQjtJQUNEdEYsYUFBYSxDQUFDbUcsV0FBVyxDQUFDakYsUUFBUSxDQUFDO0VBQ3BDO0FBQ0QsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NsaWVudC8uL3NyYy9qcy9saWJyYXJ5L3JlbmRlckJvb2tzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHJlbmRlckJvb2tzID0gYXN5bmMgZnVuY3Rpb24gKHNlYXJjaFRlcm0gPSBcIlwiKSB7XG5cdGNvbnN0IGJvb2tDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJvb2stY2FyZC1jb250YWluZXJcIik7XG5cdGJvb2tDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcblxuXHRjb25zdCBjdXJyZW50Qm9va3NEYXRhID0gYXdhaXQgZmV0Y2goXCIvYXBpL2Jvb2tzXCIpO1xuXHRsZXQgY3VycmVudEJvb2tzID0gYXdhaXQgY3VycmVudEJvb2tzRGF0YS5qc29uKCk7XG5cblx0Y29uc3QgbG93ZXJTZWFyY2hUZXJtID0gc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpO1xuXHRpZiAobG93ZXJTZWFyY2hUZXJtICE9PSBcIlwiICYmIHR5cGVvZiBsb3dlclNlYXJjaFRlcm0gPT09IFwic3RyaW5nXCIpIHtcblx0XHRjb25zdCBmaWx0ZXJlZEN1cnJlbnRCb29rcyA9IGN1cnJlbnRCb29rcy5maWx0ZXIoKGJvb2spID0+IHtcblx0XHRcdHJldHVybiAoXG5cdFx0XHRcdGJvb2sudGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlclNlYXJjaFRlcm0pIHx8XG5cdFx0XHRcdGJvb2suYXV0aG9yLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJTZWFyY2hUZXJtKVxuXHRcdFx0KTtcblx0XHR9KTtcblx0XHRjdXJyZW50Qm9va3MgPSBmaWx0ZXJlZEN1cnJlbnRCb29rcztcblx0fVxuXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgY3VycmVudEJvb2tzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y29uc3QgYm9vayA9IGN1cnJlbnRCb29rc1tpXTtcblx0XHRjb25zdCBib29rQ2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cblx0XHRpZiAoYm9vay5pc19yZWFkID09PSB0cnVlIHx8IGJvb2suaXNfcmVhZCA9PT0gXCJ0cnVlXCIpIHtcblx0XHRcdGJvb2tDYXJkLmNsYXNzTGlzdC5hZGQoXCJyZWFkXCIpO1xuXHRcdH0gZWxzZSBpZiAoYm9vay5pc19yZWFkID09PSBmYWxzZSkgYm9va0NhcmQuY2xhc3NMaXN0LmFkZChcIm5vdC1yZWFkXCIpO1xuXG5cdFx0Ym9va0NhcmQuY2xhc3NMaXN0LmFkZChcInNpbmdsZS1ib29rXCIsIFwic2NhbGUtaW4tY2VudGVyXCIpO1xuXHRcdGJvb2tDYXJkLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiYm9vay1cIiArIGkpO1xuXHRcdGJvb2tDYXJkLnNldEF0dHJpYnV0ZShcImRhdGEtaW5kZXhcIiwgaSk7XG5cblx0XHQvLyBDTE9TRSBBTkQgREVMRVRFXG5cdFx0Y29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcblx0XHRjbG9zZUJ0bi5jbGFzc0xpc3QuYWRkKFwibWF0ZXJpYWwtaWNvbnNcIiwgXCJyZW1vdmUtYm9va1wiKTtcblx0XHRjbG9zZUJ0bi50ZXh0Q29udGVudCA9IFwiIGNsb3NlIFwiO1xuXHRcdGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyBmdW5jdGlvbiAoKSB7XG5cdFx0XHRjb25zdCBmZXRjaFVSTCA9IGAvYXBpL2Jvb2tzLyR7Ym9vay5pZH1gO1xuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChmZXRjaFVSTCwge1xuXHRcdFx0XHRtZXRob2Q6IFwiREVMRVRFXCIsXG5cdFx0XHR9KTtcblx0XHRcdGlmIChyZXNwb25zZS5vaykge1xuXHRcdFx0XHRyZW5kZXJQcm9ncmVzc0JhcigpO1xuXHRcdFx0XHRyZW5kZXJCb29rcygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YWxlcnQoXCJGYWlsZWQgdG8gZGVsZXRlIGJvb2suXCIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdC8vIEVESVQgQlVUVE9OXG5cdFx0Y29uc3QgZWRpdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuXHRcdGVkaXRCdG4uY2xhc3NMaXN0LmFkZChcIm1hdGVyaWFsLWljb25zXCIsIFwiZWRpdC1ib29rLWZvcm0tb3BlblwiKTtcblx0XHRlZGl0QnRuLnRleHRDb250ZW50ID0gXCIgZWRpdCBcIjtcblx0XHRlZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRcdC8vIFNIT1cgRURJVCBGT1JNXG5cdFx0XHRkb2N1bWVudFxuXHRcdFx0XHQucXVlcnlTZWxlY3RvcihcIi5lZGl0X2Jvb2tfc2VjdGlvblwiKVxuXHRcdFx0XHQuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJkaXNwbGF5OiBibG9jaztcIik7XG5cblx0XHRcdGxldCBib29rQ2FyZENoaWxkcmVuID0gQXJyYXkuZnJvbShldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5jaGlsZE5vZGVzKTtcblxuXHRcdFx0bGV0IGV4aXN0aW5nQm9va0luZm8gPSB7XG5cdFx0XHRcdHRpdGxlOiBib29rQ2FyZENoaWxkcmVuWzJdLnRleHRDb250ZW50LFxuXHRcdFx0XHRhdXRob3I6IGJvb2tDYXJkQ2hpbGRyZW5bM10udGV4dENvbnRlbnQuc3BsaXQoXCIgXCIpLnNsaWNlKDEpLmpvaW4oXCIgXCIpLFxuXHRcdFx0XHRpc2JuOiBib29rQ2FyZENoaWxkcmVuWzRdLnRleHRDb250ZW50LnNwbGl0KFwiIFwiKVsxXSxcblx0XHRcdFx0cGFnZXM6IGJvb2tDYXJkQ2hpbGRyZW5bNV0udGV4dENvbnRlbnQuc3BsaXQoXCIgXCIpWzNdLFxuXHRcdFx0XHRlZGl0aW9uOiBib29rQ2FyZENoaWxkcmVuWzZdLnRleHRDb250ZW50LnNwbGl0KFwiIFwiKVsxXSxcblx0XHRcdFx0cHVibGlzaF9kYXRlOiBib29rQ2FyZENoaWxkcmVuWzddLnRleHRDb250ZW50LnNwbGl0KFwiIFwiKVsxXSxcblx0XHRcdFx0aXNfcmVhZDogYm9va0NhcmRDaGlsZHJlbls5XS5maXJzdENoaWxkLmNoZWNrZWQsXG5cdFx0XHRcdGJvb2tfaWQ6IGJvb2suaWQsXG5cdFx0XHR9O1xuXG5cdFx0XHQvLyBQT1BVTEFURSBJTlBVVFMgV0lUSCBERUZBVUxUIENPTlRFTlRcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYi10aXRsZS1lZGl0XCIpLnZhbHVlID0gZXhpc3RpbmdCb29rSW5mby50aXRsZTtcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYi1hdXRob3ItZWRpdFwiKS52YWx1ZSA9IGV4aXN0aW5nQm9va0luZm8uYXV0aG9yO1xuXHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNiLWlzYm4tZWRpdFwiKS52YWx1ZSA9IGV4aXN0aW5nQm9va0luZm8uaXNibjtcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYi1wYWdlcy1lZGl0XCIpLnZhbHVlID0gZXhpc3RpbmdCb29rSW5mby5wYWdlcztcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYi1lZGl0aW9uLWVkaXRcIikudmFsdWUgPVxuXHRcdFx0XHRleGlzdGluZ0Jvb2tJbmZvLmVkaXRpb247XG5cdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ItcHVibGlzaGluZ19kYXRlLWVkaXRcIikudmFsdWUgPVxuXHRcdFx0XHRleGlzdGluZ0Jvb2tJbmZvLnB1Ymxpc2hfZGF0ZTtcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYi1yZWFkX3N0YXR1cy1lZGl0XCIpLnZhbHVlID1cblx0XHRcdFx0ZXhpc3RpbmdCb29rSW5mby5pc19yZWFkO1xuXG5cdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtYm9vay1pZFwiKS5kYXRhc2V0LmJvb2tJZCA9XG5cdFx0XHRcdGV4aXN0aW5nQm9va0luZm8uYm9va19pZDtcblx0XHR9KTtcblx0XHQvLyBCT09LIENPVkVSIElNR1xuXHRcdGNvbnN0IGJvb2tDb3ZlckltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG5cdFx0Ym9va0NvdmVySW1nLmNsYXNzTGlzdC5hZGQoXCJib29rLWNvdmVyLWltZ1wiKTtcblx0XHRib29rQ292ZXJJbWcuc2V0QXR0cmlidXRlKFxuXHRcdFx0XCJzcmNcIixcblx0XHRcdFwiLi4vYXNzZXRzL2ltZy9ib29rLWNvdmVyLXBsYWNlaG9sZGVyLmpwZWdcIlxuXHRcdCk7XG5cdFx0Ym9va0NvdmVySW1nLnNldEF0dHJpYnV0ZShcImFsdFwiLCBcImJvb2sgY292ZXIgaW1hZ2VcIik7XG5cdFx0Ly9cblx0XHRjb25zdCBib29rVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDNcIik7XG5cdFx0Ym9va1RpdGxlLmNsYXNzTGlzdC5hZGQoXCJib29rLXRpdGxlXCIpO1xuXHRcdGJvb2tUaXRsZS50ZXh0Q29udGVudCA9IGJvb2sudGl0bGU7XG5cdFx0Ly9cblx0XHRjb25zdCBib29rQXV0aG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG5cdFx0Ym9va0F1dGhvci5jbGFzc0xpc3QuYWRkKFwiYm9vay1hdXRob3JcIik7XG5cdFx0Y29uc3QgbGFiZWxBdXRob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcblx0XHRsYWJlbEF1dGhvci5jbGFzc0xpc3QuYWRkKFwiYi1sYWJlbFwiKTtcblx0XHRsYWJlbEF1dGhvci50ZXh0Q29udGVudCA9IFwiQnk6IFwiO1xuXHRcdGNvbnN0IGF1dGhvckRpc3BsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcblx0XHRhdXRob3JEaXNwbGF5LmNsYXNzTGlzdC5hZGQoXCJhdXRob3JcIik7XG5cdFx0YXV0aG9yRGlzcGxheS50ZXh0Q29udGVudCA9IGJvb2suYXV0aG9yO1xuXHRcdGJvb2tBdXRob3IuYXBwZW5kKGxhYmVsQXV0aG9yLCBhdXRob3JEaXNwbGF5KTtcblx0XHQvL1xuXHRcdGNvbnN0IGJvb2tJc2JuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG5cdFx0Ym9va0lzYm4uY2xhc3NMaXN0LmFkZChcImJvb2staXNiblwiKTtcblx0XHRjb25zdCBsYWJlbElzYm4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcblx0XHRsYWJlbElzYm4uY2xhc3NMaXN0LmFkZChcImItbGFiZWxcIik7XG5cdFx0bGFiZWxJc2JuLnRleHRDb250ZW50ID0gXCJJU0JOOiBcIjtcblx0XHRjb25zdCBpc2JuRGlzcGxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuXHRcdGlzYm5EaXNwbGF5LmNsYXNzTGlzdC5hZGQoXCJpc2JuXCIpO1xuXHRcdGlzYm5EaXNwbGF5LnRleHRDb250ZW50ID0gYm9vay5pc2JuO1xuXHRcdGJvb2tJc2JuLmFwcGVuZChsYWJlbElzYm4sIGlzYm5EaXNwbGF5KTtcblx0XHQvL1xuXHRcdGNvbnN0IHBhZ2VzQ291bnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcblx0XHRwYWdlc0NvdW50LmNsYXNzTGlzdC5hZGQoXCJwYWdlcy1jb3VudFwiKTtcblx0XHRjb25zdCBsYWJlbFBhZ2VzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG5cdFx0bGFiZWxQYWdlcy5jbGFzc0xpc3QuYWRkKFwiYi1sYWJlbFwiKTtcblx0XHRsYWJlbFBhZ2VzLnRleHRDb250ZW50ID0gXCJQYWdlczogXCI7XG5cdFx0Y29uc3QgYm9va1BhZ2VzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG5cdFx0Ym9va1BhZ2VzLmNsYXNzTGlzdC5hZGQoXCJwYWdlc1wiKTtcblx0XHRib29rUGFnZXMudGV4dENvbnRlbnQgPSBib29rLnBhZ2VzO1xuXHRcdHBhZ2VzQ291bnQuYXBwZW5kKGxhYmVsUGFnZXMsIGJvb2tQYWdlcyk7XG5cdFx0Ly9cblx0XHRjb25zdCBib29rRWRpdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuXHRcdGJvb2tFZGl0aW9uLmNsYXNzTGlzdC5hZGQoXCJib29rLWVkaXRpb25cIik7XG5cdFx0Y29uc3QgbGFiZWxFZGl0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG5cdFx0bGFiZWxFZGl0aW9uLmNsYXNzTGlzdC5hZGQoXCJiLWxhYmVsXCIpO1xuXHRcdGxhYmVsRWRpdGlvbi50ZXh0Q29udGVudCA9IFwiRWRpdGlvbjogXCI7XG5cdFx0Y29uc3QgZWRpdGlvbkRpc3BsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcblx0XHRlZGl0aW9uRGlzcGxheS5jbGFzc0xpc3QuYWRkKFwiZWRpdGlvblwiKTtcblx0XHRlZGl0aW9uRGlzcGxheS50ZXh0Q29udGVudCA9IGJvb2suZWRpdGlvbjtcblx0XHRib29rRWRpdGlvbi5hcHBlbmQobGFiZWxFZGl0aW9uLCBlZGl0aW9uRGlzcGxheSk7XG5cdFx0Ly9cblx0XHRjb25zdCBwdWJsaXNoRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuXHRcdHB1Ymxpc2hEYXRlLmNsYXNzTGlzdC5hZGQoXCJib29rLXB1Ymxpc2hlZFwiKTtcblx0XHRjb25zdCBsYWJlbERhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcblx0XHRsYWJlbERhdGUuY2xhc3NMaXN0LmFkZChcImItbGFiZWxcIik7XG5cdFx0bGFiZWxEYXRlLnRleHRDb250ZW50ID0gXCJQdWJsaXNoZWQ6IFwiO1xuXHRcdGNvbnN0IGRhdGVEaXNwbGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG5cdFx0ZGF0ZURpc3BsYXkuY2xhc3NMaXN0LmFkZChcInB1Ymxpc2gtZGF0ZVwiKTtcblx0XHRkYXRlRGlzcGxheS50ZXh0Q29udGVudCA9IGJvb2sucHVibGlzaF9kYXRlO1xuXHRcdHB1Ymxpc2hEYXRlLmFwcGVuZChsYWJlbERhdGUsIGRhdGVEaXNwbGF5KTtcblx0XHQvLyBGRVRDSCBCVVRUT05cblxuXHRcdGNvbnN0IGZldGNoQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG5cdFx0ZmV0Y2hCdG4uY2xhc3NMaXN0LmFkZChcIm1hdGVyaWFsLWljb25zXCIsIFwiZmV0Y2gtYm9vay1kYXRhLWJ1dHRvblwiKTtcblx0XHRmZXRjaEJ0bi50ZXh0Q29udGVudCA9IFwiIGZldGNoIGluZm8gXCI7XG5cdFx0ZmV0Y2hCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jIGZ1bmN0aW9uIChldmVudCkge1xuXHRcdFx0Y29uc3QgYm9va0RhdGFSZXNwb25zZSA9IGF3YWl0IGZldGNoQm9va0luZm8oXG5cdFx0XHRcdGJvb2sudGl0bGUudG9Mb3dlckNhc2UoKS50cmltKClcblx0XHRcdCk7XG5cdFx0XHRjb25zdCBib29rRGF0YSA9IGJvb2tEYXRhUmVzcG9uc2UuZG9jc1swXTtcblxuXHRcdFx0Y29uc3QgZmV0Y2hlZEJvb2tEYXRhID0ge1xuXHRcdFx0XHR0aXRsZTogYm9va0RhdGEudGl0bGUsXG5cdFx0XHRcdGF1dGhvcjogYm9va0RhdGEuYXV0aG9yX25hbWVbMF0sXG5cdFx0XHRcdGlzYm46IGJvb2tEYXRhLmlzYm5bMF0sXG5cdFx0XHRcdHB1Ymxpc2hfZGF0ZTogYm9va0RhdGEuZmlyc3RfcHVibGlzaF95ZWFyLFxuXHRcdFx0XHRjb3Zlcl9pbWdfc3JjOiBgaHR0cHM6Ly9jb3ZlcnMub3BlbmxpYnJhcnkub3JnL2IvaXNibi8ke2Jvb2tEYXRhLmlzYm5bMF19LU0uanBnYCxcblx0XHRcdH07XG5cblx0XHRcdGNvbnN0IHJlcGxhY2VCb29rRGF0YSA9ICh7XG5cdFx0XHRcdHRpdGxlLFxuXHRcdFx0XHRhdXRob3IsXG5cdFx0XHRcdGlzYm4sXG5cdFx0XHRcdHB1Ymxpc2hfZGF0ZSxcblx0XHRcdFx0Y292ZXJfaW1nX3NyYyxcblx0XHRcdH0pID0+IHtcblx0XHRcdFx0Ym9va1RpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XG5cdFx0XHRcdGJvb2tBdXRob3IudGV4dENvbnRlbnQgPSBhdXRob3I7XG5cdFx0XHRcdGJvb2tJc2JuLnRleHRDb250ZW50ID0gaXNibjtcblx0XHRcdFx0cHVibGlzaERhdGUudGV4dENvbnRlbnQgPSBwdWJsaXNoX2RhdGU7XG5cdFx0XHRcdGJvb2tDb3ZlckltZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgY292ZXJfaW1nX3NyYyk7XG5cdFx0XHR9O1xuXG5cdFx0XHRyZXBsYWNlQm9va0RhdGEoZmV0Y2hlZEJvb2tEYXRhKTtcblx0XHR9KTtcblx0XHQvLyBSRUFEIFRPR0dMRVxuXHRcdGNvbnN0IHJlYWRUb2dnbGVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuXHRcdHJlYWRUb2dnbGVMYWJlbC5jbGFzc0xpc3QuYWRkKFwicmVhZF90b2dnbGVfbGFiZWxcIik7XG5cdFx0cmVhZFRvZ2dsZUxhYmVsLnRleHRDb250ZW50ID0gXCJNYXJrIGFzIHJlYWQ6IFwiO1xuXHRcdC8vXG5cdFx0Y29uc3QgdG9nZ2xlQ29udHJvbExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuXHRcdHRvZ2dsZUNvbnRyb2xMYWJlbC5jbGFzc0xpc3QuYWRkKFwic3dpdGNoXCIpO1xuXHRcdGNvbnN0IHRvZ2dsZUNvbnRyb2xDaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblx0XHR0b2dnbGVDb250cm9sQ2hlY2tib3guc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImNoZWNrYm94XCIpO1xuXHRcdHRvZ2dsZUNvbnRyb2xDaGVja2JveC5jbGFzc0xpc3QuYWRkKFwicmVhZF90b2dnbGVcIik7XG5cdFx0Ly8gaWYgKGJvb2suaXNfcmVhZD09PXRydWUpIHRvZ2dsZUNvbnRyb2xDaGVja2JveC5zZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIsIFwiXCIpO1xuXHRcdGlmIChib29rLmlzX3JlYWQgPT09IHRydWUgfHwgYm9vay5pc19yZWFkID09PSBcInRydWVcIilcblx0XHRcdHRvZ2dsZUNvbnRyb2xDaGVja2JveC5jaGVja2VkID0gdHJ1ZTtcblx0XHQvLyBpZiAoYm9va1JlYWRTdGF0dXNGb3JtLnZhbHVlID09PSB0cnVlKSB0b2dnbGVDb250cm9sQ2hlY2tib3guY2hlY2tlZCA9IHRydWU7XG5cdFx0Y29uc3QgdG9nZ2xlQ29udHJvbFNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcblx0XHR0b2dnbGVDb250cm9sU3Bhbi5jbGFzc0xpc3QuYWRkKFwicmVhZC10b2dnbGUtc2xpZGVyXCIsIFwicm91bmRcIik7XG5cdFx0dG9nZ2xlQ29udHJvbExhYmVsLmFwcGVuZCh0b2dnbGVDb250cm9sQ2hlY2tib3gsIHRvZ2dsZUNvbnRyb2xTcGFuKTtcblx0XHQvL1xuXG5cdFx0dG9nZ2xlQ29udHJvbENoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRcdGxldCBlbGVtZW50ID0gZXZlbnQudGFyZ2V0O1xuXG5cdFx0XHRsZXQgYm9va0NvbnRhaW5lciA9IGVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50O1xuXG5cdFx0XHRpZiAoYm9va0NvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoXCJub3QtcmVhZFwiKSkge1xuXHRcdFx0XHRib29rQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJub3QtcmVhZFwiKTtcblx0XHRcdFx0Ym9va0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwicmVhZFwiKTtcblx0XHRcdH0gZWxzZSBpZiAoYm9va0NvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoXCJyZWFkXCIpKSB7XG5cdFx0XHRcdGJvb2tDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcInJlYWRcIik7XG5cdFx0XHRcdGJvb2tDb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm5vdC1yZWFkXCIpO1xuXHRcdFx0fVxuXHRcdFx0bGV0IGluZGV4ID0gYm9va0NvbnRhaW5lci5nZXRBdHRyaWJ1dGUoXCJkYXRhLWluZGV4XCIpO1xuXHRcdFx0Y3VycmVudEJvb2tzW2luZGV4XS5pc19yZWFkID0gZWxlbWVudC5jaGVja2VkO1xuXG5cdFx0XHRjb25zdCBuZXdSZWFkU3RhdHVzRGF0YSA9IHtcblx0XHRcdFx0aXNfcmVhZDogY3VycmVudEJvb2tzW2luZGV4XS5pc19yZWFkLFxuXHRcdFx0fTtcblxuXHRcdFx0Y29uc3QgZmV0Y2hVUkwgPSBgL2FwaS9ib29rcy8ke2Jvb2suaWR9YDtcblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZmV0Y2hVUkwsIHtcblx0XHRcdFx0bWV0aG9kOiBcIlBVVFwiLFxuXHRcdFx0XHRib2R5OiBKU09OLnN0cmluZ2lmeShuZXdSZWFkU3RhdHVzRGF0YSksXG5cdFx0XHRcdGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcblx0XHRcdH0pO1xuXHRcdFx0aWYgKHJlc3BvbnNlLm9rKSB7XG5cdFx0XHRcdHJlbmRlclByb2dyZXNzQmFyKCk7XG5cdFx0XHRcdHJlbmRlckJvb2tzKCk7XG5cdFx0XHRcdC8vIC8vIGRpcmVjdCBsb2dnZWQtaW4gdXNlciB0byBob21lIHBhZ2Vcblx0XHRcdFx0Ly8gZG9jdW1lbnQubG9jYXRpb24ucmVwbGFjZShcIi9cIik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRhbGVydChcIkZhaWxlZCB0byB1cGRhdGUgYm9vayByZWFkIHN0YXR1cy5cIik7XG5cdFx0XHR9XG5cblx0XHRcdC8vIHJlbmRlckJvb2tzKCk7XG5cdFx0fSk7XG5cblx0XHRib29rQ2FyZC5hcHBlbmQoXG5cdFx0XHRjbG9zZUJ0bixcblx0XHRcdGVkaXRCdG4sXG5cdFx0XHRib29rQ292ZXJJbWcsXG5cdFx0XHRib29rVGl0bGUsXG5cdFx0XHRib29rQXV0aG9yLFxuXHRcdFx0Ym9va0lzYm4sXG5cdFx0XHRwYWdlc0NvdW50LFxuXHRcdFx0Ym9va0VkaXRpb24sXG5cdFx0XHRwdWJsaXNoRGF0ZSxcblx0XHRcdGZldGNoQnRuLFxuXHRcdFx0cmVhZFRvZ2dsZUxhYmVsLFxuXHRcdFx0dG9nZ2xlQ29udHJvbExhYmVsXG5cdFx0KTtcblx0XHRib29rQ29udGFpbmVyLmFwcGVuZENoaWxkKGJvb2tDYXJkKTtcblx0fVxufTtcbiJdLCJuYW1lcyI6WyJyZW5kZXJCb29rcyIsInNlYXJjaFRlcm0iLCJib29rQ29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5uZXJIVE1MIiwiY3VycmVudEJvb2tzRGF0YSIsImZldGNoIiwiY3VycmVudEJvb2tzIiwianNvbiIsImxvd2VyU2VhcmNoVGVybSIsInRvTG93ZXJDYXNlIiwiZmlsdGVyZWRDdXJyZW50Qm9va3MiLCJmaWx0ZXIiLCJib29rIiwidGl0bGUiLCJpbmNsdWRlcyIsImF1dGhvciIsImkiLCJsZW5ndGgiLCJib29rQ2FyZCIsImNyZWF0ZUVsZW1lbnQiLCJpc19yZWFkIiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwiY2xvc2VCdG4iLCJ0ZXh0Q29udGVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJmZXRjaFVSTCIsImlkIiwicmVzcG9uc2UiLCJtZXRob2QiLCJvayIsInJlbmRlclByb2dyZXNzQmFyIiwiYWxlcnQiLCJlZGl0QnRuIiwiZXZlbnQiLCJib29rQ2FyZENoaWxkcmVuIiwiQXJyYXkiLCJmcm9tIiwidGFyZ2V0IiwicGFyZW50RWxlbWVudCIsImNoaWxkTm9kZXMiLCJleGlzdGluZ0Jvb2tJbmZvIiwic3BsaXQiLCJzbGljZSIsImpvaW4iLCJpc2JuIiwicGFnZXMiLCJlZGl0aW9uIiwicHVibGlzaF9kYXRlIiwiZmlyc3RDaGlsZCIsImNoZWNrZWQiLCJib29rX2lkIiwidmFsdWUiLCJkYXRhc2V0IiwiYm9va0lkIiwiYm9va0NvdmVySW1nIiwiYm9va1RpdGxlIiwiYm9va0F1dGhvciIsImxhYmVsQXV0aG9yIiwiYXV0aG9yRGlzcGxheSIsImFwcGVuZCIsImJvb2tJc2JuIiwibGFiZWxJc2JuIiwiaXNibkRpc3BsYXkiLCJwYWdlc0NvdW50IiwibGFiZWxQYWdlcyIsImJvb2tQYWdlcyIsImJvb2tFZGl0aW9uIiwibGFiZWxFZGl0aW9uIiwiZWRpdGlvbkRpc3BsYXkiLCJwdWJsaXNoRGF0ZSIsImxhYmVsRGF0ZSIsImRhdGVEaXNwbGF5IiwiZmV0Y2hCdG4iLCJib29rRGF0YVJlc3BvbnNlIiwiZmV0Y2hCb29rSW5mbyIsInRyaW0iLCJib29rRGF0YSIsImRvY3MiLCJmZXRjaGVkQm9va0RhdGEiLCJhdXRob3JfbmFtZSIsImZpcnN0X3B1Ymxpc2hfeWVhciIsImNvdmVyX2ltZ19zcmMiLCJyZXBsYWNlQm9va0RhdGEiLCJyZWFkVG9nZ2xlTGFiZWwiLCJ0b2dnbGVDb250cm9sTGFiZWwiLCJ0b2dnbGVDb250cm9sQ2hlY2tib3giLCJ0b2dnbGVDb250cm9sU3BhbiIsImVsZW1lbnQiLCJjb250YWlucyIsInJlbW92ZSIsImluZGV4IiwiZ2V0QXR0cmlidXRlIiwibmV3UmVhZFN0YXR1c0RhdGEiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImhlYWRlcnMiLCJhcHBlbmRDaGlsZCJdLCJzb3VyY2VSb290IjoiIn0=